<idea-plugin xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="/META-INF/PlatformLangPlugin.xml" xpointer="xpointer(/idea-plugin/*)"/>
  <xi:include href="/META-INF/XmlPlugin.xml" xpointer="xpointer(/idea-plugin/*)"/>
  <xi:include href="/META-INF/JsonPlugin.xml" xpointer="xpointer(/idea-plugin/*)"/>
  <xi:include href="/META-INF/ImagesPlugin.xml" xpointer="xpointer(/idea-plugin/*)"/>
  <xi:include href="CommaTips.xml" xpointer="xpointer(/idea-plugin/*)"/>
    <version>0.1</version>
    <vendor email="info@commaide.com" url="https://commaide.com/">Edument Central Europe sro.</vendor>

    <description><![CDATA[
      Comma, IntelliJ IDEA-based Perl 6 IDE.
    ]]></description>

    <change-notes><![CDATA[
    ]]>
    </change-notes>

    <xi:include href="common-meta.xml" xpointer="xpointer(/idea-plugin/*)"/>
    <!-- Components of standalone Comma -->
    <extensionPoints>
      <extensionPoint name="projectWizard.projectCategory" interface="com.intellij.ide.projectWizard.ProjectCategory"/>
      <extensionPoint name="projectImportProvider" interface="com.intellij.projectImport.ProjectImportProvider"/>
      <extensionPoint name="projectStructureDetector" interface="com.intellij.ide.util.projectWizard.importSources.ProjectStructureDetector"/>
      <extensionPoint name="configuration.ModuleStructureExtension" interface="com.intellij.openapi.roots.ui.configuration.projectRoot.ModuleStructureExtension"/>
      <extensionPoint name="projectStructureConfigurableFilter" interface="com.intellij.openapi.roots.ui.configuration.ProjectStructureConfigurableFilter"/>
      <extensionPoint name="projectStructureValidator" interface="com.intellij.openapi.roots.ui.configuration.projectRoot.daemon.ProjectStructureValidator"/>
    </extensionPoints>

    <extensions defaultExtensionNs="com.intellij">
      <projectImportProvider implementation="com.intellij.ide.util.projectWizard.ModuleImportProvider"/>
      <applicationService serviceInterface="com.intellij.openapi.module.ModuleTypeManager"
                          serviceImplementation="edument.perl6idea.module.Perl6ModuleTypeManager"/>
      <projectImportProvider implementation="edument.perl6idea.module.Perl6ProjectImportProvider"/>
      <applicationService serviceImplementation="com.intellij.ide.util.newProjectWizard.SelectTemplateSettings"/>
      <applicationService serviceInterface="com.intellij.openapi.roots.ui.OrderEntryAppearanceService"
                          serviceImplementation="com.intellij.openapi.roots.ui.OrderEntryAppearanceServiceImpl"/>
      <applicationService serviceImplementation="com.intellij.ide.projectWizard.ProjectCategoryUsagesCollector"/>
      <projectWizard.projectCategory implementation="edument.perl6idea.module.Perl6ModuleTypeCategory"/>
      <projectService serviceImplementation="edument.perl6idea.project.Perl6ProjectStructureConfigurable"/>
      <projectService serviceImplementation="com.intellij.openapi.roots.ui.configuration.ProjectStructureConfigurable"/>
      <projectService serviceImplementation="com.intellij.openapi.roots.ui.configuration.projectRoot.ProjectLibrariesConfigurable"/>
      <projectService serviceImplementation="com.intellij.openapi.roots.ui.configuration.projectRoot.ModuleStructureConfigurable"/>
      <projectService serviceImplementation="com.intellij.openapi.roots.ui.configuration.projectRoot.GlobalLibrariesConfigurable"/>
      <projectService serviceImplementation="com.intellij.openapi.roots.ui.configuration.projectRoot.FacetStructureConfigurable"/>
      <projectService serviceImplementation="com.intellij.openapi.roots.ui.configuration.artifacts.ArtifactsStructureConfigurable"/>
      <projectService serviceImplementation="com.intellij.openapi.roots.ui.configuration.projectRoot.JdkListConfigurable"/>
      <projectService serviceInterface="com.intellij.openapi.roots.ui.configuration.projectRoot.daemon.ProjectStructureProblemsSettings"
                      serviceImplementation="com.intellij.openapi.roots.ui.configuration.projectRoot.daemon.ProjectStructureProblemsSettingsImpl"/>
      <applicationService serviceInterface="com.intellij.openapi.roots.ui.configuration.projectRoot.daemon.ProjectStructureProblemsSettings"
                          serviceImplementation="com.intellij.openapi.roots.ui.configuration.projectRoot.daemon.GlobalProjectStructureProblemsSettings"/>
      <favoritesListProvider implementation="com.intellij.ide.bookmarks.BookmarksFavoriteListProvider"/>
      <favoritesListProvider implementation="com.intellij.xdebugger.impl.breakpoints.BreakpointsFavoriteListProvider"/>
      <moduleConfigurationEditorProvider implementation="edument.perl6idea.module.Perl6ModuleConfigurationEditorProvider" order="FIRST"/>
      <postStartupActivity implementation="edument.perl6idea.utils.Perl6PostStartupActivity"/>
      <projectExtension implementation="edument.perl6idea.event.SdkChangeListener"/>
    </extensions>

    <application-components>
      <component>
        <interface-class>com.intellij.openapi.projectRoots.JavaSdk</interface-class>
        <implementation-class>com.intellij.openapi.projectRoots.impl.JavaSdkImpl</implementation-class>
      </component>
    </application-components>

    <!-- Actions for standalone Comma -->
    <!-- Actions for Welcome Screen -->
    <actions>
      <action id="ShowProjectStructureSettings" class="edument.perl6idea.actions.ShowPerl6ProjectStructureAction"
              icon="AllIcons.General.ProjectStructure">
        <add-to-group group-id="FileMainSettingsGroup" anchor="after" relative-to-action="ShowSettings"/>
        <add-to-group group-id="MainToolBarSettings" anchor="after" relative-to-action="ShowSettings"/>
        <add-to-group group-id="NavBarToolBar" anchor="last"/>
      </action>
      <group id="WelcomeScreen.QuickStart.IDEA">
        <action id="WelcomeScreen.CreateNewProject" class="com.intellij.ide.actions.NewProjectAction" icon="AllIcons.General.CreateNewProject"/>
        <action id="WelcomeScreen.ImportProject" class="com.intellij.ide.actions.ImportProjectAction" icon="AllIcons.General.ImportProject"/>
        <action id="WelcomeScreen.OpenProject" class="com.intellij.ide.actions.OpenFileAction" icon="AllIcons.General.OpenProject"/>
        <add-to-group group-id="WelcomeScreen.QuickStart" anchor="first"/>
      </group>
      <group id="OpenProjectGroup">
        <group id="NewElementInMenuGroup" class="com.intellij.ide.actions.NewActionGroup" text="New" popup="true"/>
        <add-to-group group-id="FileOpenGroup" anchor="first"/>
      </group>
    <group id="NewProjectOrModuleGroup">
      <action id="NewProject" class="com.intellij.ide.actions.NewProjectAction" text="Project..."/>
      <action id="ImportProject" class="com.intellij.ide.actions.ImportProjectAction" text="Project from Existing Sources..."/>
      <group id="NewProjectFromVCS" class="com.intellij.openapi.vcs.checkout.NewProjectFromVCSGroup" text="Project from Version Control" popup="true"/>
      <separator/>
      <action id="NewModule" class="com.intellij.openapi.roots.ui.configuration.actions.NewModuleAction" text="Module..."/>
      <action id="ImportModule" class="com.intellij.ide.actions.ImportModuleAction" text="Module from Existing Sources..."/>
      <separator/>
    </group>
      <action id="NewElement" class="com.intellij.ide.actions.NewElementAction"/>
      <group id="MoveModuleToGroup" class="com.intellij.ide.projectView.impl.MoveModuleToGroupTopLevel" popup="true"/>
    </actions>
</idea-plugin>
