<idea-plugin xmlns:xi="http://www.w3.org/2001/XInclude">
  <!--<id>edument.perl6-idea-plugin</id>-->
  <name>Comma Complete Edition (Perl 6 Language Support)</name>
  <vendor email="info@commaide.com" url="https://commaide.com/">Edument Central Europe sro.</vendor>

  <description><![CDATA[
<p>
  The Comma Complete plugin provides Perl 6 language support for IDEA-based IDEs.
  Features include:
</p>

<ul>
  <li>Detailed and customizable syntax highlighting</li>
  <li>Auto-completion of various program elements</li>
  <li>Live code analysis to detect common problems</li>
  <li>Numerous code navigation features</li>
  <li>A range of refactorings, such as rename, extract variable, and extract method</li>
  <li>Running scripts</li>
  <li>Running tests and viewing the results</li>
  <li>Debugging</li>
  <li>Test coverage reporting</li>
  <li>Profiling</li>
</ul>

<p>
  The same functionality is also available as an independent IDE. For more details, see
  <a href="https://commaide.com/">the Comma website</a>.
</p>
  ]]>
  </description>

  <change-notes><![CDATA[
<ul>
    <li>Add an Extract Code refactoring, allowing for extraction of one or more
        statements into a subroutine, method, or private method. The symbols that
        need to be passed along as parameters are analyzed, and the extracted code
        replaced with a call to the extracted routine that passes the required
        symbols as arguments.</li>
    <li>Add support for collecting coverage data in both normal applications and
        when running tests. Implement basic display of this information inline with
        the code, and indication of which tests cover that line of code on hover.</li>
    <li>Support renaming refactors on tokens, rules, and regexes in a grammar.</li>
    <li>Allow for digging in to attributes, array elements, and hash elements inside
        of the debugger.</li>
    <li>Better indicate type object vs. concrete in the debug view.</li>
    <li>Allow for browsing the stacks of all running threads in the debugger, not
        just the one execution stopped in.</li>
    <li>Fix a crash when single-stepping in the debugger.</li>
    <li>Recognize %_ as an implicitly declared routine variable in a method, such
        that it will be suggested by auto-complete and not incorrectly marked as
        undeclared.</li>
    <li>Support colonpairs in regex callee names, so that calls to a specific
        protoregex candidate will parse and reference resolve correctly.</li>
    <li>Fix a glitch with closing curly brace insertion that was introduced with the
        additional of incremental lexing.</li>
    <li>Fix indentation handling when inserting multi-line statements at the end of a
        block to properly use continuation indentation.</li>
    <li>Make <code>self</code> resolve to the closest outer class/role/monitor/grammar.</li>
    <li>Fix using the word "quasi" as a hash key.</li>
    <li>Fix anonymous array and hash variables wrongly being considered undeclared.</li>
    <li>Fix a case where a bogus error about a required parameter occurring after an
        optional one would be reported.</li>
    <li>Fix an occasional exception in indexing code when "need" was used.</li>
</ul>
  ]]>
  </change-notes>

  <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/build_number_ranges.html for description -->
  <idea-version since-build="145.0"/>

  <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html
       on how to target different products -->
  <depends>com.intellij.modules.lang</depends>

  <extensions defaultExtensionNs="com.intellij">
    <xi:include href="/META-INF/meta/perl6-common.xml" xpointer="xpointer(/idea-plugin/extensions/*)"/>
    <configurationType implementation="edument.perl6idea.run.Perl6CompleteRunConfigurationType"/>
    <configurationType implementation="edument.perl6idea.testing.Perl6CompleteTestConfigurationType"/>
    <programRunner implementation="edument.perl6idea.coverage.Perl6CoverageRunner"/>
    <executor implementation="edument.perl6idea.coverage.CoverageExecutor"/>
    <programRunner implementation="edument.perl6idea.profiler.Perl6ProfileRunner"/>
    <executor implementation="edument.perl6idea.run.Perl6ProfileExecutor"/>
    <projectViewNodeDecorator implementation="edument.perl6idea.coverage.Perl6ProjectViewCoverageDecorator"/>
    <lang.refactoringSupport language="Perl6" implementationClass="edument.perl6idea.refactoring.Perl6CompleteRefactoringSupportProvider"/>
  </extensions>

  <actions>
    <xi:include href="/META-INF/meta/perl6-common.xml" xpointer="xpointer(/idea-plugin/actions/*)"/>
    <action id="Perl6Plugin.ExtractPrivateMethod" class="edument.perl6idea.actions.ExtractPrivateMethodAction" text="Private Method..."
            description="Turn this selected code fragment into a private method">
      <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt P"/>
      <add-to-group group-id="IntroduceActionsGroup" anchor="after" relative-to-action="ExtractMethod"/>
    </action>
    <action id="Perl6Plugin.ExtractRoutine" class="edument.perl6idea.actions.ExtractRoutineAction" text="Subroutine..."
            description="Turn this selected code fragment into a subroutine">
      <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt R"/>
      <add-to-group group-id="IntroduceActionsGroup" anchor="before" relative-to-action="ExtractMethod"/>
    </action>
    <group id="Perl6Plugin.CoverageMenu">
      <action id="Perl6Plugin.HideCoverage" class="edument.perl6idea.coverage.Perl6CoverageHideAction"
              text="Hide Coverage Data" />
      <separator/>
    </group>
    <group id="CoveragePlatformMenu" popup="false">
      <separator/>
      <reference ref="Perl6Plugin.CoverageMenu"/>
      <add-to-group group-id="RunMenu" anchor="before" relative-to-action="DebugMainMenu"/>
    </group>
  </actions>

  <module-components>
    <xi:include href="/META-INF/meta/perl6-common.xml" xpointer="xpointer(/idea-plugin/module-components/*)"/>
  </module-components>

  <project-components>
    <xi:include href="/META-INF/meta/perl6-common.xml" xpointer="xpointer(/idea-plugin/project-components/*)"/>
    <component>
      <interface-class>edument.perl6idea.coverage.Perl6CoverageDataManager</interface-class>
      <implementation-class>edument.perl6idea.coverage.Perl6CoverageDataManagerImpl</implementation-class>
      <option name="workspace" value="true"/>
    </component>
  </project-components>

</idea-plugin>